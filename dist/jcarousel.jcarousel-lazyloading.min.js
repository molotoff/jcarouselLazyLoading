!function(t){"use strict";t.jCarousel.isImagesLoaded=function(i){function n(t){return t.complete?"undefined"!=typeof t.naturalWidth&&0===t.naturalWidth?!1:!0:!1}var e=i.find("img"),s=e.length,o=0;return t.each(e,function(){n(this)&&o++}),o===s},t.jCarousel.plugin("jcarouselLazyLoading",{_options:{waitFunction:function(i,n){function e(){s++,t.jCarousel.isImagesLoaded(i)?n():100>=s?setTimeout(e,100):n()}var s=0;i.find("img[data-src]").each(function(){var i=t(this),n=i.attr("data-src");i.attr("src",n).removeAttr("data-src")}),e()}},_scrollPrevented:!1,_position:0,_init:function(){var i=this;this._instance=this.carousel().data("jcarousel"),this.carousel().on("jcarousel:reloadend",function(){i._reload()}).on("jcarousel:scroll",function(n,e,s,o){var a=i._position!==i._instance.list().position()[i._instance.lt];if(!i._scrollPrevented&&!a){var c=i._getNextVisibleSlides(s),r=function(){};i._scrollPrevented=!0,t.isFunction(o)&&(r=o,o=!0),i._options.waitFunction(c,function(){i._instance.scroll(s,o,function(){r(),i._scrollPrevented=!1,i._position=i._instance.list().position()[i._instance.lt]})}),n.preventDefault()}}).on("jcarousel:scrollend",function(){var t=i._position!==i._instance.list().position()[i._instance.lt];t&&i._options.waitFunction(i._instance.visible(),function(){})})},_create:function(){this._reload()},_getNextVisibleSlides:function(t){var i,n,e,s,o,a=this._instance.clipping(),c=this._instance.items().length,r=0;for(s=this._getSlide(t),i=this._instance.dimension(s),e=s,o=s.index(),n=o+1>=c;a>i;)"circular"!==this._instance._options.wrap&&n?(r>0&&(r=0),r--):(r++,n=o+r+1>=c),s=this._getSlide(o+r),i+=this._instance.dimension(s),e=e.add(s);return e},_getSlide:function(i){var n,e=t.jCarousel.parseTarget(i),s=this._instance.items().length;return e.relative?(n=this._instance.index(this._instance.target()),this._instance.items().eq((n+e.target)%s)):"number"==typeof e.target?this._instance.items().eq(e.target%s):e.target},_destroy:function(){},_reload:function(){this._options.waitFunction(this._instance.visible(),function(){}),this._position=this._instance.list().position()[this._instance.lt]}})}(jQuery);